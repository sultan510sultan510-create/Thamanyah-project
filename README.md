# ๐ฏ ูุธุงู ุจุซ ุชูุงุนู ุงููุณุชุฎุฏููู ุฅูู BigQuery ู Redis ููุธุงู ุฎุงุฑุฌู

ูุดุฑูุน ููุฏุณู ููุนุงูุฌุฉ ุจูุงูุงุช ุชูุงุนู ุงููุณุชุฎุฏููู ุจุดูู ูุญุธู ูู ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุฅูู ุซูุงุซ ูุฌูุงุช ูุฎุชููุฉ:
- BigQuery ูุชุญููู ุงูุจูุงูุงุช
- Redis ูุชูุงุนูุงุช ุงูุฒูู ุงูุญูููู
- ููุธุงู ุฎุงุฑุฌู (ูุญุงูู)

---

# ๐ง ูุธุฑุฉ ุนุงูุฉ ุนูู ููููุงุช ุงููุดุฑูุน

### ๐ฆ 1. `data_generator`
ููููุฏ ุจูุงูุงุช ูููู ุจุฅูุดุงุก ุณุฌูุงุช ุชูุงุนู ููููุฉ ููุฑุณููุง ูุจุงุดุฑุฉ ุฅูู ูุงุนุฏุฉ PostgreSQL.

---

### ๐ฆ 2. `producer`
- ููุฑุฃ ุงูุฃุญุฏุงุซ ุงูุฌุฏูุฏุฉ ูู PostgreSQL
- ููุซุฑู ุงูุจูุงูุงุช ููุฑุจุทูุง ุจุฌุฏูู ุงููุญุชูู
- ูุฑุณููุง ุฅูู Kafka
- ูุฎุฒููุง ูู ูููุงุช JSON ูุฃุฌู BigQuery ูุงุญููุง

> โณ๏ธ ุชู ุงุณุชุฎุฏุงู `processed_key` ูุถูุงู `Exactly-once`ุ ู `last_processed.txt` ูุญูุธ ุขุฎุฑ ุชูููุช ุชูุช ูุนุงูุฌุชู.

---

### ๐ฆ 3. `consumer`
- ูุณุชููู ุงูุจูุงูุงุช ูู Kafka
- ูุฑุณููุง ุฅูู Redis + ูุธุงู ุฎุงุฑุฌู
- ูุทุจุน ุชุฑุชูุจ ุงูุชูุงุนู ูุขุฎุฑ ุงูุฃุฌูุฒุฉ ุงุณุชุฎุฏุงููุง ุฎูุงู ุขุฎุฑ 10 ุฏูุงุฆู
- ูุญุณุจ Latency ููุทุจุนู

---

### ๐ฆ 4. `uploader`
ูุฑูุน ูููุงุช JSON ุงููุงุชุฌุฉ ูู `producer` ุฅูู BigQuery ูู ุญุงู ุชููุฑ ุญุณุงุจ ูููุชุฑ.

---

### โ๏ธ 5. `docker-compose.yml`
ุชููุฆุฉ ุจูุฆุฉ ุงูุชุดุบูู ุจุงููุงูู ุนุจุฑ Docker.

---

# โถ๏ธ ุทุฑููุฉ ุชุดุบูู ุงููุดุฑูุน

## 1. ุชุดุบูู ุงูุจูุฆุฉ

```bash
docker-compose up --build
```

---

## 2. ุชุดุบูู ุงูุณูุฑุจุชุงุช

```bash
# ุชูููุฏ ุงูุจูุงูุงุช
docker exec -it generator python data_generator.py

# ุชุดุบูู ุงูู Producer
docker exec -it producer python event_processor_producer.py

# ุชุดุบูู ุงูู Consumer
docker exec -it consumer python event_processor_consumer.py

# ุฑูุน ุฅูู BigQuery (ุงุฎุชูุงุฑู)
docker exec -it bigquery python load_to_bigquery.py
```

---

## 3. ููุงุญุธุงุช ูุจู ุงูุชุดุบูู

- ุชุฃูุฏ ูู ูุถุน ููู `bq_key.json` ุฏุงุฎู `consumer/` ู `uploader/`
- ุงูููู `last_processed.txt` ููุณุชุฎุฏู ูุญูุธ ุขุฎุฑ ุญุฏุซ ุชูุช ูุนุงูุฌุชู ูุถูุงู ุนุฏู ุงูุชูุฑุงุฑ.

---

# ๐งฉ ุงููุฑุงุฑุงุช ุงูุชุตููููุฉ ูุฃุณุจุงุจูุง

### 1. ุชุฎุฒูู ุจูุงูุงุช BigQuery ูู JSON
ูุนุฏู ุชููุฑ ุญุณุงุจ ูููุชุฑุ ุชู ุชุฎุฒูู ุงูุจูุงูุงุช ูู ูููุงุช JSON ูุน ูุฌูุฏ `bigquery_batches`ุ ูุชุญุถูุฑ ุทุฑููุฉ ุฅุฑุณุงู ูุจุงุดุฑ ุฏุงุฎู ุงูููุฏ (ูููุนููู) ูุงุณุชุฎุฏุงููุง ูุงุญููุง.

---

### 2. ุงุณุชุฎุฏุงู `last_processed.txt`
ูุชูููุฐ `Exactly-once` ุจุณูุท ููุนูุงูุ ูุณูุญ ุจุฅุนุงุฏุฉ ุงูุชุดุบูู ูู ุขุฎุฑ ููุทุฉ ุชููู ุฏูู ุชูุฑุงุฑ ุงูุฃุญุฏุงุซ.

---

### 3. Redis ูุฌูุฉ ูุญุธูุฉ
ูุชู ุงุณุชุฎุฏุงู Redis ูุงุณุชุฎุฑุงุฌ ุงูุฅุญุตุงุกุงุช ุงููุญุธูุฉ ุฎูุงู ุฃูู ูู 5 ุซูุงูู.

---

### 4. ุงููุตู ุจูู `producer` ู `consumer`
ูุถูุงู ูุฑููุฉ ุฃูุจุฑุ ูุณูููุฉ ูู ุงูุชูุณุนุฉุ ููุตู ูุนุงูุฌุฉ ุงููุตุฏุฑ ุนู ูุนุงูุฌุฉ ุงููุฌูุงุช.

---

### 5. Kafka ููุธุงู ูุณูุท
ูููุฑ ุชุฑุชูุจุ ูุณุฑุนุฉุ ูุฅุฏุงุฑุฉ ุงูุฃุญุฏุงุซ ุจูู ุนุฏุฉ ูุณุชููููู.

---

### 6. Docker ูุชุดุบูู ููุญูุฏ
ูููุฑ Docker ุจูุฆุฉ ุฌุงูุฒุฉ ูุชุดุบูู ูู ุงูููููุงุช ุจุณูููุฉ ุฏูู ุฅุนุฏุงุฏุงุช ูุนูุฏุฉ.